var {defineSupportCode} = require('cucumber');

defineSupportCode(function({Given, When, Then}) {
	
	Given(/^Customer Actions screen is loaded$/, function(callback) {
		browser.getTitle().then(function(webpagetitle) {
			if (webpagetitle == 'ATLAS - Customer Actions') {
				callback();
			} else {
				callback(new Error("Not on Customer Actions page"));
			}
		});
	});
	
	When(/^Set the Customer Data to hidden field$/, function(callback) {
		browser.getTitle().then(function(webpagetitle) {
			var actual_JSON = JSON.stringify(browser.params.custinfo);
			console.log("load --> " + actual_JSON);
			
			if (webpagetitle == 'ATLAS - Customer Actions') {
				browser.executeScript("document.getElementById('cif').value='" + actual_JSON + "'");
    		    callback();
    		} else {
    			callback(new Error("Not on Customer Actions page"));
    		}
		});
      });
	
	Then(/^Validate customer data on Customer Actions Screen$/, function(callback) {
		try {
			var custData = browser.findElement(By.id('cif')).getText();
			if(custData!=null){
				callback();
			}else{
				callback(new Error("Required fields not found on page"));
			}
				
		} catch(error) {
			console.log(error.message);
			callback(new Error("Required fields not found on page"));
		}
    });
});

