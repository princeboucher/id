var {defineSupportCode} = require('cucumber');

defineSupportCode(function({Given, When, Then}) {

	Given('User is on Customer Action Screen for Phone Maintenance', function(callback) {
		browser.getTitle().then(function(webpagetitle) {
			var actual_JSON = JSON.stringify(browser.params.custinfo);
			console.log("load --> " + actual_JSON);
			if (webpagetitle == 'ATLAS - Customer Actions') {
				browser.executeScript("document.getElementById('cif').value='" + actual_JSON + "'");
				callback();
			} else {
				callback(new Error("Not on Customer Actions page"));
			}
		});
	});

	/*
	 * When(/^Set the Customer Data to hidden field for PhoneMaintenance$/,
	 * function(callback) { browser.getTitle().then(function(webpagetitle) { var
	 * actual_JSON = JSON.stringify(browser.params.custinfo); console.log("load
	 * --> " + actual_JSON);
	 * 
	 * if (webpagetitle == 'ATLAS - Customer Actions') {
	 * browser.executeScript("document.getElementById('cif').value='" +
	 * actual_JSON + "'"); callback(); } else { callback(new Error("Not on
	 * Customer Actions page")); } }); });
	 */
	
	 When('User clicks on Phone Maintenance Link', function (callback) {
		 browser.findElement(By.xpath("/html/body/app/div/div/atlas-customeractions/section/article[2]/ul/li[2]/a")).click();
		 browser.sleep(10000);        
	 });
	 
     Then('User is taken to Phone Maintenance screen', function (callback) {
 		browser.getTitle().then(function(webpagetitle) {
			if (webpagetitle == 'ATLAS - Phone Maintenance') {
				callback();
			} else {
				callback(new Error("Not on Phone Maintenance page"));
			}
		});
     });

     Given('User is on Phone Maintenance screen', function (callback) {
 		browser.getTitle().then(function(webpagetitle) {
			var actual_JSON = JSON.stringify(browser.params.custinfo);
			console.log("load --> " + actual_JSON);
			if (webpagetitle == 'ATLAS - Customer Actions') {
				browser.executeScript("document.getElementById('cif').value='" + actual_JSON + "'");
		 		browser.getTitle().then(function(webpagetitle) {
					if (webpagetitle == 'ATLAS - Phone Maintenance') {
						callback();
					} else {
						callback(new Error("Not on Phone Maintenance page"));
					}
				});
			} else {
				callback(new Error("Not on Customer Actions page"));
			}
		});
     });

     When('User highlights a row on Phone Numbers table', function (callback) {
 		browser.findElement(By.xpath("/html/body/app/div/div/atlas-phonemaint/section[1]/table/tbody/tr")).click();
		browser.sleep(5000);
       });

     Then('Edit Phone Number section is displayed', function (callback) {
         // Write code here that turns the phrase above into concrete actions
         callback();
     });

     Then('Phone Number field is displayed', function (callback) {
         // Write code here that turns the phrase above into concrete actions
         callback();
     });

     Then('phone number is prepopulated', function (callback) {
         // Write code here that turns the phrase above into concrete actions
    	 callback();
     });

});